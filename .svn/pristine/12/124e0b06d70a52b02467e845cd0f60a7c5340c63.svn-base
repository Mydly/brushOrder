import {
    MemoryRouter as Router,
    Route,
    Redirect,
} from 'react-router-dom';
import { connect } from 'react-redux';
import React from 'react';

import { Button } from 'antd'

import '../static/style/common.scss';

import Nav from '../component/view/Nav';
import Content from '../component/view/Content';
import Index from '../component/view/Index';
import Finan from '../component/view/Finan';
import Safe from '../component/view/Safe';
import Trade from '../component/view/Trade';
import Issue from '../component/view/Issue';
import Money from '../component/view/Money';
import Vote from '../component/view/Vote';
import Login from '../component/view/Login';


import { PageKey } from '../config/consts';
import { changeTab, tabChangeAction } from '../actions/topNav';

class RouteList extends React.Component{
    constructor(props) {
        super(props);

        this.handleLogin = this.handleLogin.bind(this);

    }

    handleLogin(e){
        e.preventDefault();
        console.log(e);
        const {change} = this.props;
        change(PageKey.login.key);
    }

    render(){

        let contentCom = <Index key={PageKey.index.key}/>;
        switch (this.props.tabBar){
            case PageKey.trade.key:
                contentCom = <Trade key={PageKey.trade.key} />;
                break;
            case PageKey.safe.key:
                contentCom = <Safe key={PageKey.safe.key} />;
                break;
            case PageKey.finan.key:
                contentCom = <Finan key={PageKey.finan.key} />;
                break;
            case PageKey.issue.key:
                contentCom = <Issue key={PageKey.issue.key} />;
                break;
            case PageKey.money.key:
                contentCom = <Money key={PageKey.money.key} />;
                break;
            case PageKey.vote.key:
                contentCom = <Vote key={PageKey.vote.key} />;
                break;
            case PageKey.login.key:
                contentCom = <Login key={PageKey.login.key} />;
                break;
            default:
        }


        console.log('routes render props');

        return (
            <div>
                <Button type="primary"
                        className="loginContainar"
                        data_key={PageKey.login.key} onClick={this.handleLogin}>登录</Button>
                <Nav />
                <div className="contentBody">
                    {contentCom}
                </div>
            </div>
        );
    }
}

//function render(props) {
//
//
//
//    //return (
//    //    <div>
//    //        <Nav />
//    //            <Route path="index" component={Index} />
//    //            <Route path="trade" component={Trade}/>
//    //            <Route path="safe" component={Safe}/>
//    //            <Route path="finan" component={Finan}/>
//    //            <Route path="issue" component={Issue}/>
//    //            <Route path="money" component={Money}/>
//    //            <Route path="vote" component={Vote}/>
//    //    </div>
//    //);
//}

function mapStateToProps(state) {

    console.log('state ========');
    console.log(state);

    return {
        tabBar: state.topNav.tabBar,
        lastBar:state.topNav.lastBar
    };
}

const mapDispatchToProps = (dispatch) => {
    return {
        change:(tab) => {
            dispatch(tabChangeAction(tab))
        }}
}

function Routes() {

    console.log('routes this======');
    console.log(this);

    return (
        <Router>
            <div>
                <Route path="/" component={connect(mapStateToProps, mapDispatchToProps)(RouteList)} />
            </div>
        </Router>
    );
}

export default Routes;
