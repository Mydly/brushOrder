import React, { PropTypes } from 'react'
import '../../static/style/common.scss'
import { loginAction } from '../../actions/topNav'
import { connect } from 'react-redux';

import { isMobile, isPassword, alog } from '../../function/common'
import { AlertType } from '../../config/consts'
import { art } from '../../actions/topNav'



import { Form, Button } from 'antd';



class UserInfo extends React.Component {

    constructor(props) {
        super(props);
        this.handleSubmit = this.handleSubmit.bind(this);

    }

    handleSubmit(e) {
        e.preventDefault();

        this.props.form.setFields({
            mobile: {
                value: "15623247776"
            },
            psd: {
                value: "admin123"
            },
        });

       let mobile = this.props.form.getFieldValue('mobile');
       let psd = this.props.form.getFieldValue('psd');
        alog('click login');

        if( !isMobile(mobile) ){ alog('手机号不合法'); return; }
        if( !isPassword(psd) ){ alog('登录密码不合法'); return; }

        const { loginClick,art } = this.props;
        loginClick(mobile,psd);
        //art('登录中...',AlertType.infoAlert,3000);
    }


    componentWillUpdate(){

    }

    render() {

        return (
            <div className="userInfoContent">
                <div>{this.props.userinfo.username}</div><div>退出</div>
                <ul className="userInfoBtn">
                    <li>aa</li>
                    <li>bb</li>
                    <li>cc</li>
                </ul>
            </div>
        );
    }

}

UserInfo.propTypes = {
    loginClick: PropTypes.func,
}

const mapDispatchToProps = (dispatch) => {
    return {

    }
}

const mapStateToProps = (state) => {
    return {
        userinfo:state.topNav.userinfo
    }
}



export default connect(mapStateToProps,mapDispatchToProps)(UserInfo);