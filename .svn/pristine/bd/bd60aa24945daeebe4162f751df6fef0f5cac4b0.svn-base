import React from 'react'
import {  HashRouter as Router, Link} from 'react-router-dom'
import { Menu, Button } from 'antd'
import '../../static/style/common.scss'
import { connect } from 'react-redux';
import Finan from './Finan';
import { changeTab, tabChangeAction } from '../../actions/topNav';
import { PageKey } from  '../../config/consts'

const SubMenu = Menu.SubMenu;


class Nav extends React.Component {

    constructor(props) {
        super(props);
        this.handleClick = this.handleClick.bind(this);

        console.log('pppppppppppppp');
        console.log(props);

    }

    handleClick (e) {
        console.log('click',e);


            const {change} = this.props;
            change(e.key);


    }

    render() {
        //const { dispatch, visibleTodos, visibilityFilter } = this.props;
        //console.log(visibleTodos);

        let menuArr = [
            {title:"首页",key:PageKey.index.key},
            {title:"交易中心",key:PageKey.trade.key},
            {title:"安全中心",key:PageKey.safe.key,child:[
                {title:"账户预览",key:PageKey.safeAccount.key},
                {title:"登录密码",key:PageKey.safePsd.key},
                {title:"收货地址",key:PageKey.safeAddress.key}
            ]},
            {title:"财务中心",key:PageKey.finan.key},
            {title:"认购中心",key:PageKey.issue.key},
            {title:"理财中心",key:PageKey.money.key},
            {title:"新币投票",key:PageKey.vote.key}
        ];

        let menuList = menuArr.map(
            (item) => {
                if(item.child == undefined){
                    return <Menu.Item key={item.key} style={{  }}>{item.title}</Menu.Item>;
                }
                else {
                   return (<SubMenu title={item.title} key={item.key}>
                       {item.child.map(
                           (item2) =>
                               ( <Menu.Item key={item2.key}>{item2.title}</Menu.Item>)
                       )}
                   </SubMenu>);
                }
            }

        );

        console.log(menuList);

        return (
            <div>

            <Menu className="navMenuBody" theme="light" mode="inline"
                  style={{ width: 180, }} defaultSelectedKeys={[PageKey.index.key]}
                  onClick={this.handleClick}
            >
                { menuList }
            </Menu>
                </div>
        );
    }
}

const mapDispatchToProps = (dispatch) => {
    return {
        change:(tab) => {
        dispatch(tabChangeAction(tab))
    }}
}

export default connect(null,mapDispatchToProps)(Nav);