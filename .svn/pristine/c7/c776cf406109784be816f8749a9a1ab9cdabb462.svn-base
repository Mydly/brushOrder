/**
 * Created by Administrator on 2017/4/12.
 */
var path = require('path');
var webpack = require('webpack');
var CopyWebpackPlugin = require('copy-webpack-plugin');
//var ExtractTextPlugin = require("extract-text-webpack-plugin");
var APP_PATH = path.resolve(__dirname, 'app');
var SRC_PATH = path.resolve(__dirname, 'src');

module.exports = {
    target: 'electron',
    node: {
        fs: 'empty'
    },
    entry:{
        js:'./src/entry.js'
    },
    output:{
        filename:'./app/entry.js',
        //chunkFilename:'./app/[chunkhash].js'
    },
    module:{
        loaders:[
            {
                loader: 'babel-loader',
                include: [
                    SRC_PATH,
                ],
                // Only run `.js` and `.jsx` files through Babel
                test: /\.js|\.jsx?$/,
                // Options to configure babel with
                query: {
                    presets: ['es2015', 'react']
                }

            },
            {
                loader:'url-loader',
                test: /\.png|\.jpg$/
            },
            //scss
            {
                test: /\.scss|\.sass|\.css$/,
                loader:'style-loader!css-loader!sass-loader'
            }
        ]
    },
    plugins:[
        //new ExtractTextPlugin("[name].css", {  allChunks: true }),
        //new webpack.optimize.CommonsChunkPlugin("chunks"),
        //new webpack.optimize.DedupePlugin(),
        //new webpack.HotModuleReplacementPlugin(),
        new CopyWebpackPlugin([
            { from: path.resolve(SRC_PATH, 'main.js'), to: path.resolve(APP_PATH,'main.js') },
            { from: path.resolve(SRC_PATH, 'index.html'), to: path.resolve(APP_PATH,'index.html') },
            { from: path.resolve(SRC_PATH, '../package.json'), to: path.resolve(APP_PATH,'package.json') }
        ])
    ]
}